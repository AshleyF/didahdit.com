<html>
    <head>
        <title>Learn Morse Code</title>
        <style>body { margin: 0; padding: 0; }</style>
        <script>
            var canvas;

            var ui = {
                x: 100,
                y: 100,
                darkMode: true,
            };

            function resizeCanvas() {
                canvas.width = document.body.clientWidth;
                canvas.height = document.body.clientHeight;
            }

            function redraw() {
                var backgroundColor = ui.darkMode ? '#111' : '#eee'; // black/white
                var borderColor = '#fd0'; // yellow
                var mainTextColor = '#f43'; // red
                var ballColor = '#f81'; // orange

                var ctx = canvas.getContext('2d');

                function setFontSizeToFit(txt, width, height, weight) {
                    function setFont(size) { ctx.font = weight + ' ' + size + 'px sans-serif'; }
                    const sampleSize = 100;
                    setFont(sampleSize);
                    var size = ctx.measureText(txt);
                    var ascent = size.fontBoundingBoxAscent;
                    var descent = size.fontBoundingBoxDescent;
                    var scale = Math.min(
                        width / (size.actualBoundingBoxLeft + size.actualBoundingBoxRight),
                        height / (ascent + descent));
                    setFont(scale * sampleSize);
                    return { ascent: ascent, descent: descent };
                }

                document.body.style.backgroundColor = backgroundColor;

                var ratio = window.devicePixelRatio;

                ctx.fillStyle = borderColor;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = backgroundColor;
                ctx.fillRect(2, 2, canvas.width - 4, canvas.height - 4);

                var txt = 'Hotdog!';
                ctx.textAlign = 'center';
                var metrics = setFontSizeToFit(txt, canvas.width, canvas.height, 'bold');
                ctx.fillStyle = mainTextColor;
                ctx.fillText(txt, canvas.width / 2, canvas.height / 2 + metrics.ascent * ratio / 2);
                
                ctx.fillStyle = ballColor;
                ctx.beginPath();
                ctx.arc(ui.x, ui.y, 50 * ratio, 0, 2 * Math.PI, false);
                ctx.fill();
            }

            function touch(x, y) {
                ui.x = x;
                ui.y = y;
                if (ui.y < 100) ui.darkMode = !ui.darkMode;
                redraw();
            }

            window.onload = function() {
                canvas = document.getElementById('canvas');
                canvas.onmousedown = function(e) { e.preventDefault(); touch(e.x, e.y); }
                canvas.ontouchstart = function(e) { e.preventDefault(); touch(e.touches[0].clientX, e.touches[0].clientY); }

                resizeCanvas();
                redraw();
            }

            window.onresize = function() {
                resizeCanvas();
                redraw();
            }
        </script>
    </head>
    <body class="dark">
        <canvas id="canvas"></canvas>
    </body>
</html>


