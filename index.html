<html>
    <head>
        <title>Learn Morse Code</title>
        <style>body { margin: 0; padding: 0; }</style>
        <script>
            var canvas;

            var ui = {
                x: 100,
                y: 100,
                darkMode: true,
            };

            function resizeCanvas() {
                canvas.width = document.body.clientWidth;
                canvas.height = document.body.clientHeight;
            }

            function redraw() {
                var backgroundColor = ui.darkMode ? '#111' : '#eee'; // black/white
                var foregroundColor = ui.darkMode ? '#eee' : '#111'; // white/black
                var mainTextColor = '#f43'; // red
                var ballColor = '#f81'; // orange

                var ctx = canvas.getContext('2d');

                function setFontSizeToFit(txt, width, height, weight, actual) {
                    function setFont(size) { ctx.font = weight + ' ' + size + 'px sans-serif'; }
                    const sampleSize = 100;
                    setFont(sampleSize);
                    var size = ctx.measureText(txt);
                    var scale = Math.min(
                        width / (size.actualBoundingBoxLeft + size.actualBoundingBoxRight),
                        height / (actual ? size.actualBoundingBoxAscent + size.actualBoundingBoxDescent :
                                           size.fontBoundingBoxAscent + size.fontBoundingBoxDescent));
                    setFont(scale * sampleSize);
                }

                document.body.style.backgroundColor = backgroundColor;

                var ratio = window.devicePixelRatio;

                ctx.fillStyle = backgroundColor;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                var padding = Math.max(canvas.width, canvas.height) * 0.1;

                var txt = 'Tracey';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                setFontSizeToFit(txt, canvas.width - 2 * padding, canvas.height - 2 * padding, 'bold', false);
                ctx.fillStyle = mainTextColor;
                ctx.fillText(txt, canvas.width / 2, canvas.height / 2);
                
                ctx.fillStyle = ballColor;
                ctx.beginPath();
                ctx.arc(ui.x, ui.y, 50 * ratio, 0, 2 * Math.PI, false);
                ctx.fill();

                var buttonSize = padding;
                var modeText = ui.darkMode ? '☼' : '☽';
                setFontSizeToFit(modeText, buttonSize, 'normal', true);
                ctx.fillStyle = foregroundColor;
                ctx.fillText(modeText, padding + buttonSize / 2, canvas.height - padding - buttonSize / 2);
                //ctx.strokeStyle = foregroundColor;
                //ctx.beginPath();
                //ctx.rect(padding + buttonSize, canvas.height - buttonSize - padding, buttonSize, buttonSize);
                //ctx.stroke();
            }

            function touch(x, y) {
                ui.x = x;
                ui.y = y;
                if (ui.x < 200 && ui.y > canvas.height - 200) ui.darkMode = !ui.darkMode;
                redraw();
            }

            window.onload = function() {
                canvas = document.getElementById('canvas');
                canvas.onmousedown = function(e) { e.preventDefault(); touch(e.x, e.y); }
                canvas.ontouchstart = function(e) { e.preventDefault(); touch(e.touches[0].clientX, e.touches[0].clientY); }

                resizeCanvas();
                redraw();
            }

            window.onresize = function() {
                resizeCanvas();
                redraw();
            }
        </script>
    </head>
    <body class="dark">
        <canvas id="canvas"></canvas>
    </body>
</html>


